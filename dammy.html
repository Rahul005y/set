<!DOCTYPE html>
<html>
<head>
    <title>Advanced Movie Ticket Booking</title>

    <style>
        body{
            display:flex;
            justify-content:center;
            align-items:center;
            height:100vh;
            background:#f7f0ff;
            font-family:Arial;
        }

        .container{
            width:400px;
            background:white;
            padding:20px;
            border-radius:10px;
            box-shadow:0 0 20px rgba(0,0,0,0.1);
            text-align:center;
        }

        h2{
            margin-bottom:15px;
            color:#8e2de2;
        }

        .seats{
            display:grid;
            grid-template-columns: repeat(5, 1fr);
            gap:10px;
            margin:20px 0;
        }

        .seat{
            width:50px;
            height:50px;
            background:#ddd;
            border-radius:5px;
            line-height:50px;
            text-align:center;
            cursor:pointer;
            user-select:none;
            font-weight:bold;
        }

        .selected{
            background:#6a1b9a;
            color:white;
        }

        button{
            width:100%;
            padding:12px;
            background:#8e2de2;
            color:white;
            border:none;
            border-radius:6px;
            font-size:17px;
            cursor:pointer;
            margin-top:10px;
        }

        button:disabled{
            background:gray;
            cursor:not-allowed;
        }

        .bar-box{
            width:100%;
            height:25px;
            background:#ddd;
            border-radius:5px;
            overflow:hidden;
            margin-top:20px;
            display:none;
        }

        .bar{
            height:100%;
            width:0%;
            background:#8e2de2;
        }

        #percent{
            margin-top:10px;
            font-size:22px;
            font-weight:bold;
        }

        #status{
            margin-top:10px;
            font-size:18px;
        }

        #total{
            font-size:20px;
            font-weight:bold;
            margin-top:10px;
        }

    </style>
</head>
<body>

<div class="container">
    <h2>Advanced Movie Booking</h2>

    <div class="seats" id="seatArea">
        <!-- Seats Auto Generated by JavaScript -->
    </div>

    <div id="total">Total: ₹0</div>

    <button id="bookBtn">Book Tickets</button>

    <div class="bar-box">
        <div class="bar" id="bar"></div>
    </div>

    <div id="percent"></div>
    <div id="status"></div>
</div>

<script>
    let seatArea = document.querySelector("#seatArea");
    let totalText = document.querySelector("#total");
    let bookBtn = document.querySelector("#bookBtn");

    let bar = document.querySelector("#bar");
    let percent = document.querySelector("#percent");
    let status = document.querySelector("#status");
    let barBox = document.querySelector(".bar-box");

    let price = 150;  // price per seat
    let total = 0;
    let selectedSeats = [];

    // 25 seats (A1–E5)
    let rows = ["A","B","C","D","E"];
    let seatCount = 1;

    rows.forEach(row => {
        for(let i=1; i<=5; i++){
            let seat = document.createElement("div");
            seat.classList.add("seat");
            seat.textContent = row + i;
            

            seat.addEventListener("click", function(){

                // toggle selection
                seat.classList.toggle("selected");

                if(seat.classList.contains("selected")){
                    selectedSeats.push(seat.textContent);
                    total += price;
                } else {
                    selectedSeats = selectedSeats.filter(s => s !== seat.textContent);
                    total -= price;
                }

                totalText.textContent = "Total: ₹" + total;
            });

            seatArea.appendChild(seat);
        }
    });


    // BOOK NOW BUTTON
    let p = 0;

    bookBtn.addEventListener("click", function(){

        if(selectedSeats.length === 0){
            alert("Please select at least ONE seat!");
            return;
        }

        bookBtn.disabled = true;
        status.textContent = "Booking your selected seats...";
        barBox.style.display = "block";

        let speed = Math.floor(Math.random()*100) + 40;

        let run = setInterval(() => {

            if(p < 100){
                p++;
                bar.style.width = p + "%";
                percent.textContent = p + "%";
            }
            else{
                clearInterval(run);
                status.textContent = 
                    "Seats Booked Successfully ✔ (" + selectedSeats.join(", ") + ")";
            }

        }, speed);

    });
</script>

</body>
</html>
